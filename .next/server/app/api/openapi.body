{"openapi":"3.1.0","info":{"title":"Patna EV Co-Pilot API","version":"1.0.0","description":"REST API for the Patna EV Co-Pilot driver assistance application. Provides endpoints for ride event tracking, zone management, context data, and recommendations."},"servers":[{"url":"/","description":"Current server"}],"components":{"schemas":{"ApiError":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]},"Health":{"type":"object","properties":{"ok":{"type":"boolean"},"time":{"type":"string","format":"date-time"}},"required":["ok","time"]},"Zone":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"geohash6":{"type":["string","null"]},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":["object","null"],"additionalProperties":{}}},"required":["id","name","geohash6","is_airport","is_charger","meta"]},"RideEvent":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"event_type":{"type":"string","enum":["booking_received","ride_started","ride_completed","booking_cancelled"]},"occurred_at":{"type":"string","format":"date-time"},"zone_id":{"type":["string","null"],"format":"uuid"},"geohash6":{"type":["string","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","event_type","occurred_at","zone_id","geohash6","battery_pct","created_at"]},"ZoneVisit":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"zone_id":{"type":"string","format":"uuid"},"arrived_at":{"type":"string","format":"date-time"},"left_at":{"type":["string","null"],"format":"date-time"},"context":{"type":["object","null"],"additionalProperties":{}},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","zone_id","arrived_at","left_at","context","created_at"]},"Ping":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"ts":{"type":"string","format":"date-time"},"lat":{"type":"number"},"lon":{"type":"number"},"speed_kmh":{"type":["number","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","ts","lat","lon","speed_kmh","battery_pct","created_at"]},"Charge":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"station_zone":{"type":["string","null"],"format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":["string","null"],"format":"date-time"},"kwh":{"type":["number","null"]},"cost_inr":{"type":["number","null"]},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","station_zone","start_at","end_at","kwh","cost_inr","created_at"]},"CityEvent":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"category":{"type":["string","null"]},"venue_zone":{"type":"string","format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":"string","format":"date-time"},"impact_score":{"type":["number","null"]},"created_at":{"type":"string","format":"date-time"}},"required":["id","name","category","venue_zone","start_at","end_at","impact_score","created_at"]},"Recommendation":{"type":"object","properties":{"zone_id":{"type":"string","format":"uuid"},"zone_name":{"type":"string"},"score":{"type":"number"},"reason":{"type":"string"}},"required":["zone_id","zone_name","score","reason"]},"Weather":{"type":"object","properties":{"hour":{"type":"string","format":"date-time"},"temp_c":{"type":["number","null"]},"humidity":{"type":["number","null"]},"wind_kmh":{"type":["number","null"]},"rain_mm":{"type":["number","null"]}},"required":["hour","temp_c","humidity","wind_kmh","rain_mm"]},"AirportWave":{"type":"object","properties":{"bucket":{"type":"string"},"arrival_wave":{"type":["number","null"]},"departure_wave":{"type":["number","null"]}},"required":["bucket","arrival_wave","departure_wave"]},"Hotspot":{"type":"object","properties":{"zone_id":{"type":"string","format":"uuid"},"bucket":{"type":"string"},"popularity_index":{"type":"number"}},"required":["zone_id","bucket","popularity_index"]},"CreateRideEventReq":{"type":"object","properties":{"event_type":{"type":"string","enum":["booking_received","ride_started","ride_completed","booking_cancelled"]},"occurred_at":{"type":"string","format":"date-time"},"lat":{"type":["number","null"]},"lon":{"type":["number","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100}},"required":["event_type"]},"CreateZoneVisitReq":{"type":"object","properties":{"zone_id":{"type":"string","format":"uuid"},"arrived_at":{"type":"string","format":"date-time"},"context":{"type":"object","additionalProperties":{}}},"required":["zone_id"]},"UpdateZoneVisitReq":{"type":"object","properties":{"left_at":{"type":"string","format":"date-time"}},"required":["left_at"]},"CreatePingReq":{"type":"object","properties":{"ts":{"type":"string","format":"date-time"},"lat":{"type":"number"},"lon":{"type":"number"},"speed_kmh":{"type":["number","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100}},"required":["lat","lon"]},"CreateChargeReq":{"type":"object","properties":{"station_zone":{"type":["string","null"],"format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":["string","null"],"format":"date-time"},"kwh":{"type":["number","null"]},"cost_inr":{"type":["number","null"]}}},"AdminZoneReq":{"type":"object","properties":{"name":{"type":"string"},"lat":{"type":"number"},"lon":{"type":"number"},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":"object","additionalProperties":{}}},"required":["name","lat","lon"]},"AdminEventReq":{"type":"object","properties":{"name":{"type":"string"},"category":{"type":"string"},"venue_zone":{"type":"string","format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":"string","format":"date-time"},"impact_score":{"type":"number"}},"required":["name","venue_zone","start_at","end_at"]}},"parameters":{},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Supabase JWT token from authentication"}}},"paths":{"/api/health":{"get":{"tags":["System"],"summary":"Health check","responses":{"200":{"description":"System is healthy","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"ok":{"type":"boolean"},"time":{"type":"string","format":"date-time"}},"required":["ok","time"]}},"required":["data"]}}}}}}},"/api/zones":{"get":{"tags":["Zones"],"summary":"List all zones","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of zones","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"geohash6":{"type":["string","null"]},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":["object","null"],"additionalProperties":{}}},"required":["id","name","geohash6","is_airport","is_charger","meta"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/ride-events":{"post":{"tags":["Ride Events"],"summary":"Create a ride event","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"event_type":{"type":"string","enum":["booking_received","ride_started","ride_completed","booking_cancelled"]},"occurred_at":{"type":"string","format":"date-time"},"lat":{"type":["number","null"]},"lon":{"type":["number","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100}},"required":["event_type"]}}}},"responses":{"201":{"description":"Ride event created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"created":{"type":"boolean"},"id":{"type":"string","format":"uuid"}},"required":["created"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}},"get":{"tags":["Ride Events"],"summary":"List own ride events","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":false,"name":"limit","in":"query"}],"responses":{"200":{"description":"List of ride events","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"event_type":{"type":"string","enum":["booking_received","ride_started","ride_completed","booking_cancelled"]},"occurred_at":{"type":"string","format":"date-time"},"zone_id":{"type":["string","null"],"format":"uuid"},"geohash6":{"type":["string","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","event_type","occurred_at","zone_id","geohash6","battery_pct","created_at"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/ride-events/{id}":{"get":{"tags":["Ride Events"],"summary":"Get a ride event by ID","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","format":"uuid"},"required":true,"name":"id","in":"path"}],"responses":{"200":{"description":"Ride event details","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"event_type":{"type":"string","enum":["booking_received","ride_started","ride_completed","booking_cancelled"]},"occurred_at":{"type":"string","format":"date-time"},"zone_id":{"type":["string","null"],"format":"uuid"},"geohash6":{"type":["string","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","event_type","occurred_at","zone_id","geohash6","battery_pct","created_at"]}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/zone-visits":{"post":{"tags":["Zone Visits"],"summary":"Create a zone visit","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"zone_id":{"type":"string","format":"uuid"},"arrived_at":{"type":"string","format":"date-time"},"context":{"type":"object","additionalProperties":{}}},"required":["zone_id"]}}}},"responses":{"201":{"description":"Zone visit created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"created":{"type":"boolean"},"id":{"type":"string","format":"uuid"}},"required":["created"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}},"get":{"tags":["Zone Visits"],"summary":"List own zone visits","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":false,"name":"limit","in":"query"}],"responses":{"200":{"description":"List of zone visits","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"zone_id":{"type":"string","format":"uuid"},"arrived_at":{"type":"string","format":"date-time"},"left_at":{"type":["string","null"],"format":"date-time"},"context":{"type":["object","null"],"additionalProperties":{}},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","zone_id","arrived_at","left_at","context","created_at"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/zone-visits/{id}":{"patch":{"tags":["Zone Visits"],"summary":"Update zone visit left_at","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","format":"uuid"},"required":true,"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"left_at":{"type":"string","format":"date-time"}},"required":["left_at"]}}}},"responses":{"200":{"description":"Zone visit updated","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"zone_id":{"type":"string","format":"uuid"},"arrived_at":{"type":"string","format":"date-time"},"left_at":{"type":["string","null"],"format":"date-time"},"context":{"type":["object","null"],"additionalProperties":{}},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","zone_id","arrived_at","left_at","context","created_at"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/pings":{"post":{"tags":["Tracking"],"summary":"Create a GPS ping","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"ts":{"type":"string","format":"date-time"},"lat":{"type":"number"},"lon":{"type":"number"},"speed_kmh":{"type":["number","null"]},"battery_pct":{"type":["number","null"],"minimum":0,"maximum":100}},"required":["lat","lon"]}}}},"responses":{"201":{"description":"Ping created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"created":{"type":"boolean"},"id":{"type":"string","format":"uuid"}},"required":["created"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/charges":{"post":{"tags":["Charges"],"summary":"Create a charge record","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"station_zone":{"type":["string","null"],"format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":["string","null"],"format":"date-time"},"kwh":{"type":["number","null"]},"cost_inr":{"type":["number","null"]}}}}}},"responses":{"201":{"description":"Charge created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"created":{"type":"boolean"},"id":{"type":"string","format":"uuid"}},"required":["created"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}},"get":{"tags":["Charges"],"summary":"List own charges","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":false,"name":"limit","in":"query"}],"responses":{"200":{"description":"List of charges","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"driver_id":{"type":"string","format":"uuid"},"station_zone":{"type":["string","null"],"format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":["string","null"],"format":"date-time"},"kwh":{"type":["number","null"]},"cost_inr":{"type":["number","null"]},"created_at":{"type":"string","format":"date-time"}},"required":["id","driver_id","station_zone","start_at","end_at","kwh","cost_inr","created_at"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/context/weather":{"get":{"tags":["Context"],"summary":"Get latest weather observation","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Latest weather data","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":["object","null"],"properties":{"hour":{"type":"string","format":"date-time"},"temp_c":{"type":["number","null"]},"humidity":{"type":["number","null"]},"wind_kmh":{"type":["number","null"]},"rain_mm":{"type":["number","null"]}},"required":["hour","temp_c","humidity","wind_kmh","rain_mm"]}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/context/airport-wave":{"get":{"tags":["Context"],"summary":"Get current airport wave data","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Airport wave data","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"bucket":{"type":"string"},"arrival_wave":{"type":["number","null"]},"departure_wave":{"type":["number","null"]}},"required":["bucket","arrival_wave","departure_wave"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/context/hotspot":{"get":{"tags":["Context"],"summary":"Get zone hotspot popularity","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","format":"uuid"},"required":false,"name":"zone_id","in":"query"},{"schema":{"type":"string"},"required":false,"name":"bucket","in":"query"}],"responses":{"200":{"description":"Hotspot data","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":["object","null"],"properties":{"zone_id":{"type":"string","format":"uuid"},"bucket":{"type":"string"},"popularity_index":{"type":"number"}},"required":["zone_id","bucket","popularity_index"]}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/recommendations/next-spot":{"get":{"tags":["Recommendations"],"summary":"Get next recommended spot","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":false,"name":"lat","in":"query"},{"schema":{"type":"string"},"required":false,"name":"lon","in":"query"}],"responses":{"200":{"description":"Recommended zones","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"zone_id":{"type":"string","format":"uuid"},"zone_name":{"type":"string"},"score":{"type":"number"},"reason":{"type":"string"}},"required":["zone_id","zone_name","score","reason"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/admin/zones":{"post":{"tags":["Admin"],"summary":"Create a zone (admin only)","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"lat":{"type":"number"},"lon":{"type":"number"},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":"object","additionalProperties":{}}},"required":["name","lat","lon"]}}}},"responses":{"201":{"description":"Zone created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"created":{"type":"boolean"},"id":{"type":"string","format":"uuid"}},"required":["created"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"403":{"description":"Forbidden - admin only","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}},"get":{"tags":["Admin"],"summary":"List all zones (admin)","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of zones","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"geohash6":{"type":["string","null"]},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":["object","null"],"additionalProperties":{}}},"required":["id","name","geohash6","is_airport","is_charger","meta"]}}},"required":["data"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"403":{"description":"Forbidden - admin only","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/admin/zones/{id}":{"patch":{"tags":["Admin"],"summary":"Update a zone (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","format":"uuid"},"required":true,"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"lat":{"type":"number"},"lon":{"type":"number"},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":"object","additionalProperties":{}}}}}}},"responses":{"200":{"description":"Zone updated","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"geohash6":{"type":["string","null"]},"is_airport":{"type":"boolean"},"is_charger":{"type":"boolean"},"meta":{"type":["object","null"],"additionalProperties":{}}},"required":["id","name","geohash6","is_airport","is_charger","meta"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"403":{"description":"Forbidden - admin only","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/admin/events":{"post":{"tags":["Admin"],"summary":"Create a city event (admin only)","security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"category":{"type":"string"},"venue_zone":{"type":"string","format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":"string","format":"date-time"},"impact_score":{"type":"number"}},"required":["name","venue_zone","start_at","end_at"]}}}},"responses":{"201":{"description":"Event created","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"created":{"type":"boolean"},"id":{"type":"string","format":"uuid"}},"required":["created"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"403":{"description":"Forbidden - admin only","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}},"/api/admin/events/{id}":{"patch":{"tags":["Admin"],"summary":"Update a city event (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string","format":"uuid"},"required":true,"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"category":{"type":"string"},"venue_zone":{"type":"string","format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":"string","format":"date-time"},"impact_score":{"type":"number"}}}}}},"responses":{"200":{"description":"Event updated","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"category":{"type":["string","null"]},"venue_zone":{"type":"string","format":"uuid"},"start_at":{"type":"string","format":"date-time"},"end_at":{"type":"string","format":"date-time"},"impact_score":{"type":["number","null"]},"created_at":{"type":"string","format":"date-time"}},"required":["id","name","category","venue_zone","start_at","end_at","impact_score","created_at"]}},"required":["data"]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"403":{"description":"Forbidden - admin only","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"},"details":{}},"required":["error"]}}}}}}}},"webhooks":{}}