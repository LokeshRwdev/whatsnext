(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/components/layout/DriverShell.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "DriverShell",
    ()=>DriverShell
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/utils.ts [app-client] (ecmascript)");
;
;
function DriverShell({ title, subtitle, actions, children, className }) {
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("section", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex h-full flex-col", className),
        children: [
            (title || subtitle || actions) && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("header", {
                className: "flex flex-col gap-2 border-b px-4 py-4 text-left",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "flex items-start justify-between gap-3",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            children: [
                                title && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h1", {
                                    className: "text-2xl font-semibold leading-tight",
                                    children: title
                                }, void 0, false, {
                                    fileName: "[project]/components/layout/DriverShell.tsx",
                                    lineNumber: 19,
                                    columnNumber: 25
                                }, this),
                                subtitle && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                    className: "text-sm text-muted-foreground",
                                    children: subtitle
                                }, void 0, false, {
                                    fileName: "[project]/components/layout/DriverShell.tsx",
                                    lineNumber: 20,
                                    columnNumber: 28
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/components/layout/DriverShell.tsx",
                            lineNumber: 18,
                            columnNumber: 13
                        }, this),
                        actions && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "shrink-0",
                            children: actions
                        }, void 0, false, {
                            fileName: "[project]/components/layout/DriverShell.tsx",
                            lineNumber: 22,
                            columnNumber: 25
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/components/layout/DriverShell.tsx",
                    lineNumber: 17,
                    columnNumber: 11
                }, this)
            }, void 0, false, {
                fileName: "[project]/components/layout/DriverShell.tsx",
                lineNumber: 16,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex-1 overflow-y-auto px-4 pb-24 pt-4 md:pb-8",
                children: children
            }, void 0, false, {
                fileName: "[project]/components/layout/DriverShell.tsx",
                lineNumber: 26,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/layout/DriverShell.tsx",
        lineNumber: 14,
        columnNumber: 5
    }, this);
}
_c = DriverShell;
var _c;
__turbopack_context__.k.register(_c, "DriverShell");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/TrackingToggle.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "TrackingToggle",
    ()=>TrackingToggle
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/utils.ts [app-client] (ecmascript)");
"use client";
;
;
function TrackingToggle({ trackingOn, permissionStatus, toggleTracking, error }) {
    const statusCopy = buildStatus(permissionStatus, error);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
        type: "button",
        onClick: toggleTracking,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex items-center gap-3 rounded-2xl border px-4 py-3 shadow-sm transition hover:border-primary", trackingOn ? "bg-emerald-600 text-white" : "bg-muted text-foreground"),
        "aria-pressed": trackingOn,
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "relative inline-flex h-5 w-10 items-center rounded-full bg-white/30 p-0.5",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                    className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("inline-block h-4 w-4 rounded-full bg-white transition", trackingOn ? "translate-x-5" : "translate-x-0")
                }, void 0, false, {
                    fileName: "[project]/components/TrackingToggle.tsx",
                    lineNumber: 27,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/components/TrackingToggle.tsx",
                lineNumber: 26,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "text-left",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-sm font-semibold leading-tight",
                        children: "Live Suggestions"
                    }, void 0, false, {
                        fileName: "[project]/components/TrackingToggle.tsx",
                        lineNumber: 35,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-xs text-muted-foreground/90",
                        children: [
                            trackingOn ? "Tracking enabled" : "Tap to start",
                            " | ",
                            statusCopy
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/TrackingToggle.tsx",
                        lineNumber: 36,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/components/TrackingToggle.tsx",
                lineNumber: 34,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/TrackingToggle.tsx",
        lineNumber: 17,
        columnNumber: 5
    }, this);
}
_c = TrackingToggle;
function buildStatus(permission, error) {
    if (error) return error;
    switch(permission){
        case "granted":
            return "Foreground only";
        case "denied":
            return "Permission denied";
        case "prompt":
            return "Requires GPS access";
        case "unsupported":
            return "GPS unsupported";
        default:
            return permission || "";
    }
}
var _c;
__turbopack_context__.k.register(_c, "TrackingToggle");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/lib/api-client.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "apiGet",
    ()=>apiGet,
    "apiPost",
    ()=>apiPost,
    "fetchDriverState",
    ()=>fetchDriverState,
    "fetchRecommendations",
    ()=>fetchRecommendations,
    "postPing",
    ()=>postPing,
    "postRideEvent",
    ()=>postRideEvent,
    "postTripSync",
    ()=>postTripSync,
    "upsertOpsDaily",
    ()=>upsertOpsDaily
]);
async function parseJson(res) {
    if (res.status === 204) return null;
    const contentType = res.headers.get("content-type");
    if (contentType && contentType.includes("application/json")) {
        return await res.json();
    }
    return null;
}
async function handleResponse(res) {
    if (res.ok) {
        const data = await parseJson(res);
        return {
            data,
            error: null
        };
    }
    const payload = await parseJson(res) || undefined;
    const error = {
        code: payload?.error?.code || `HTTP_${res.status}`,
        message: payload?.error?.message || res.statusText,
        details: payload?.error?.details
    };
    return {
        data: null,
        error
    };
}
async function apiGet(url) {
    const res = await fetch(url, {
        cache: "no-store",
        credentials: "include"
    });
    return handleResponse(res);
}
async function apiPost(url, body) {
    const res = await fetch(url, {
        method: "POST",
        headers: {
            "content-type": "application/json"
        },
        body: JSON.stringify(body),
        credentials: "include"
    });
    return handleResponse(res);
}
async function postPing(payload) {
    return apiPost("/api/pings", payload);
}
async function fetchDriverState() {
    return apiGet("/api/driver-state");
}
async function fetchRecommendations(params) {
    const qs = new URLSearchParams();
    if (params?.lat !== undefined) qs.set("lat", String(params.lat));
    if (params?.lon !== undefined) qs.set("lon", String(params.lon));
    if (params?.k !== undefined) qs.set("k", String(params.k));
    const suffix = qs.toString();
    return apiGet(`/api/recommendations/next-spot${suffix ? `?${suffix}` : ""}`);
}
async function postRideEvent(payload) {
    return apiPost("/api/ride-events/ingest", {
        occurred_at: new Date().toISOString(),
        ...payload
    });
}
async function upsertOpsDaily(payload) {
    return apiPost("/api/ops-daily/upsert", payload);
}
async function postTripSync(payload) {
    return apiPost("/api/trips/sync", payload);
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/lib/hooks/useDriverState.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useDriverState",
    ()=>useDriverState
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/api-client.ts [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
"use client";
;
;
function useDriverState(pollMs = 0) {
    _s();
    const [data, setData] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const load = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useDriverState.useCallback[load]": async ()=>{
            const { data, error } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fetchDriverState"])();
            if (error) {
                setError(error.message);
            } else {
                setError(null);
                setData(data);
            }
            setLoading(false);
        }
    }["useDriverState.useCallback[load]"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useDriverState.useEffect": ()=>{
            load();
            if (pollMs > 0) {
                const id = setInterval(load, pollMs);
                return ({
                    "useDriverState.useEffect": ()=>clearInterval(id)
                })["useDriverState.useEffect"];
            }
        }
    }["useDriverState.useEffect"], [
        load,
        pollMs
    ]);
    return {
        data,
        loading,
        error,
        refresh: load
    };
}
_s(useDriverState, "KrZbG0iHBofwJAKWiwWTMEud1Io=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/lib/tracking/store.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useTrackingStore",
    ()=>useTrackingStore
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zustand$2f$esm$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/zustand/esm/index.mjs [app-client] (ecmascript) <locals>");
"use client";
;
const useTrackingStore = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zustand$2f$esm$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["create"])((set)=>({
        trackingOn: false,
        permissionStatus: "prompt",
        lastFix: null,
        lastPingAt: null,
        lastRecommendation: null,
        error: null,
        isDriving: false,
        autoStartPending: true,
        setTrackingOn: (trackingOn)=>set({
                trackingOn
            }),
        setPermissionStatus: (permissionStatus)=>set({
                permissionStatus
            }),
        setLastFix: (lastFix)=>set({
                lastFix
            }),
        setLastPingAt: (lastPingAt)=>set({
                lastPingAt
            }),
        setRecommendation: (lastRecommendation)=>set({
                lastRecommendation
            }),
        setError: (error)=>set({
                error
            }),
        setIsDriving: (isDriving)=>set(()=>({
                    isDriving,
                    autoStartPending: isDriving ? false : true
                })),
        setAutoStartPending: (autoStartPending)=>set({
                autoStartPending
            })
    }));
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/ui/card.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Card",
    ()=>Card,
    "CardContent",
    ()=>CardContent,
    "CardDescription",
    ()=>CardDescription,
    "CardFooter",
    ()=>CardFooter,
    "CardHeader",
    ()=>CardHeader,
    "CardTitle",
    ()=>CardTitle
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/utils.ts [app-client] (ecmascript)");
;
;
;
const Card = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("rounded-2xl border bg-card text-card-foreground shadow-sm", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/card.tsx",
        lineNumber: 8,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c1 = Card;
Card.displayName = "Card";
const CardHeader = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c2 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex flex-col space-y-1.5 p-6", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/card.tsx",
        lineNumber: 23,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c3 = CardHeader;
CardHeader.displayName = "CardHeader";
const CardTitle = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c4 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("text-2xl font-semibold leading-none tracking-tight", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/card.tsx",
        lineNumber: 35,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c5 = CardTitle;
CardTitle.displayName = "CardTitle";
const CardDescription = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c6 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("text-sm text-muted-foreground", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/card.tsx",
        lineNumber: 50,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c7 = CardDescription;
CardDescription.displayName = "CardDescription";
const CardContent = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c8 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("p-6 pt-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/card.tsx",
        lineNumber: 62,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c9 = CardContent;
CardContent.displayName = "CardContent";
const CardFooter = /*#__PURE__*/ __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["forwardRef"](_c10 = ({ className, ...props }, ref)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        ref: ref,
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("flex items-center p-6 pt-0", className),
        ...props
    }, void 0, false, {
        fileName: "[project]/components/ui/card.tsx",
        lineNumber: 70,
        columnNumber: 3
    }, ("TURBOPACK compile-time value", void 0)));
_c11 = CardFooter;
CardFooter.displayName = "CardFooter";
;
var _c, _c1, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;
__turbopack_context__.k.register(_c, "Card$React.forwardRef");
__turbopack_context__.k.register(_c1, "Card");
__turbopack_context__.k.register(_c2, "CardHeader$React.forwardRef");
__turbopack_context__.k.register(_c3, "CardHeader");
__turbopack_context__.k.register(_c4, "CardTitle$React.forwardRef");
__turbopack_context__.k.register(_c5, "CardTitle");
__turbopack_context__.k.register(_c6, "CardDescription$React.forwardRef");
__turbopack_context__.k.register(_c7, "CardDescription");
__turbopack_context__.k.register(_c8, "CardContent$React.forwardRef");
__turbopack_context__.k.register(_c9, "CardContent");
__turbopack_context__.k.register(_c10, "CardFooter$React.forwardRef");
__turbopack_context__.k.register(_c11, "CardFooter");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/NextZonesPanel.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "NextZonesPanel",
    ()=>NextZonesPanel
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/api-client.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useDriverState$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/hooks/useDriverState.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/tracking/store.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/card.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$arrow$2d$up$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ArrowUpRight$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/arrow-up-right.js [app-client] (ecmascript) <export default as ArrowUpRight>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$map$2d$pin$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__MapPin$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/map-pin.js [app-client] (ecmascript) <export default as MapPin>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$refresh$2d$cw$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__RefreshCw$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/refresh-cw.js [app-client] (ecmascript) <export default as RefreshCw>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$formatDistanceToNow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/date-fns/formatDistanceToNow.js [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
;
const STALE_MS = 45_000;
const AUTO_REFRESH_MS = 180_000; // 3 minutes
function NextZonesPanel({ trackingOn, seedRecommendation }) {
    _s();
    const { data: driverState } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useDriverState$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDriverState"])();
    const [recommendation, setRecommendation] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(seedRecommendation ?? null);
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(!seedRecommendation);
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const setTrackingRecommendation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "NextZonesPanel.useTrackingStore[setTrackingRecommendation]": (s)=>s.setRecommendation
    }["NextZonesPanel.useTrackingStore[setTrackingRecommendation]"]);
    const lastFix = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "NextZonesPanel.useTrackingStore[lastFix]": (s)=>s.lastFix
    }["NextZonesPanel.useTrackingStore[lastFix]"]);
    const lastFixRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(lastFix);
    const lastFetchAtRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "NextZonesPanel.useEffect": ()=>{
            lastFixRef.current = lastFix;
        }
    }["NextZonesPanel.useEffect"], [
        lastFix
    ]);
    const syncRecommendation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "NextZonesPanel.useCallback[syncRecommendation]": (next)=>{
            setRecommendation(next);
            setTrackingRecommendation(next);
        }
    }["NextZonesPanel.useCallback[syncRecommendation]"], [
        setTrackingRecommendation
    ]);
    const hydrateFromState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "NextZonesPanel.useCallback[hydrateFromState]": ()=>{
            if (driverState?.recommendation) {
                const rec = driverState.recommendation;
                if (Date.now() - Date.parse(rec.computed_at) < STALE_MS) {
                    syncRecommendation(rec);
                    setError(null);
                    setLoading(false);
                    return true;
                }
            }
            return false;
        }
    }["NextZonesPanel.useCallback[hydrateFromState]"], [
        driverState,
        syncRecommendation
    ]);
    const fetchLatest = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "NextZonesPanel.useCallback[fetchLatest]": async ()=>{
            lastFetchAtRef.current = Date.now();
            setLoading(true);
            const params = {
                k: 3
            };
            const loc = lastFixRef.current;
            if (loc) {
                params.lat = loc.lat;
                params.lon = loc.lon;
            }
            const { data, error } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fetchRecommendations"])(params);
            if (error) {
                if (error.code === "NO_STATE") {
                    setError("We couldn't get your current location. Enable live tracking or share location to see zone recommendations.");
                } else {
                    setError(error.message);
                }
            } else {
                setError(null);
                syncRecommendation(data);
            }
            setLoading(false);
        }
    }["NextZonesPanel.useCallback[fetchLatest]"], [
        syncRecommendation
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "NextZonesPanel.useEffect": ()=>{
            if (!seedRecommendation) {
                if (!hydrateFromState()) {
                    fetchLatest();
                }
            }
        }
    }["NextZonesPanel.useEffect"], [
        seedRecommendation,
        hydrateFromState,
        fetchLatest
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "NextZonesPanel.useEffect": ()=>{
            hydrateFromState();
        }
    }["NextZonesPanel.useEffect"], [
        driverState,
        hydrateFromState
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "NextZonesPanel.useEffect": ()=>{
            if (seedRecommendation && (!recommendation || seedRecommendation.computed_at !== recommendation.computed_at)) {
                syncRecommendation(seedRecommendation);
            }
        }
    }["NextZonesPanel.useEffect"], [
        seedRecommendation,
        recommendation,
        syncRecommendation
    ]);
    const runAutoRefresh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "NextZonesPanel.useCallback[runAutoRefresh]": ()=>{
            const now = Date.now();
            if (now - lastFetchAtRef.current < AUTO_REFRESH_MS) {
                return;
            }
            void fetchLatest();
        }
    }["NextZonesPanel.useCallback[runAutoRefresh]"], [
        fetchLatest
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "NextZonesPanel.useEffect": ()=>{
            if (!trackingOn) return;
            runAutoRefresh();
            const id = setInterval(runAutoRefresh, AUTO_REFRESH_MS);
            return ({
                "NextZonesPanel.useEffect": ()=>clearInterval(id)
            })["NextZonesPanel.useEffect"];
        }
    }["NextZonesPanel.useEffect"], [
        trackingOn,
        runAutoRefresh
    ]);
    const empty = !loading && !error && (!recommendation || !recommendation.top || recommendation.top.length === 0);
    const waitingForGps = trackingOn && !lastFix;
    const computedAgo = recommendation?.computed_at ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$date$2d$fns$2f$formatDistanceToNow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["formatDistanceToNow"])(new Date(recommendation.computed_at), {
        addSuffix: true
    }) : null;
    const context = recommendation?.context;
    const avgTrafficIdx = typeof context?.traffic_speed_idx === "number" ? context.traffic_speed_idx : null;
    const trafficSource = recommendation?.traffic_source ?? null;
    const headerMeta = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "NextZonesPanel.useMemo[headerMeta]": ()=>{
            const parts = [
                computedAgo ? `Refreshed ${computedAgo}` : "Refreshed just now",
                describeTrafficSource(trafficSource),
                avgTrafficIdx !== null ? `Avg traffic ${describeTrafficLevel(avgTrafficIdx)}` : null
            ];
            return parts.filter(Boolean).join(" | ");
        }
    }["NextZonesPanel.useMemo[headerMeta]"], [
        computedAgo,
        trafficSource,
        avgTrafficIdx
    ]);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        className: "shadow-sm",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardHeader"], {
                className: "flex flex-row items-center justify-between space-y-0",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardTitle"], {
                                className: "text-base font-semibold",
                                children: "Next best zones"
                            }, void 0, false, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 144,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                className: "text-xs text-muted-foreground",
                                children: headerMeta
                            }, void 0, false, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 145,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 143,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        variant: "ghost",
                        size: "icon",
                        "aria-label": "Refresh",
                        onClick: fetchLatest,
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$refresh$2d$cw$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__RefreshCw$3e$__["RefreshCw"], {
                            className: "h-4 w-4"
                        }, void 0, false, {
                            fileName: "[project]/components/NextZonesPanel.tsx",
                            lineNumber: 148,
                            columnNumber: 11
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 147,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/components/NextZonesPanel.tsx",
                lineNumber: 142,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardContent"], {
                className: "space-y-4",
                children: [
                    loading && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "space-y-3",
                        children: [
                            0,
                            1,
                            2
                        ].map((idx)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "rounded-xl border p-3",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "h-4 w-1/2 animate-pulse rounded bg-muted"
                                    }, void 0, false, {
                                        fileName: "[project]/components/NextZonesPanel.tsx",
                                        lineNumber: 156,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "mt-2 h-3 w-1/3 animate-pulse rounded bg-muted"
                                    }, void 0, false, {
                                        fileName: "[project]/components/NextZonesPanel.tsx",
                                        lineNumber: 157,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, idx, true, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 155,
                                columnNumber: 15
                            }, this))
                    }, void 0, false, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 153,
                        columnNumber: 11
                    }, this),
                    !loading && error && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700",
                        children: [
                            error,
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                size: "sm",
                                variant: "secondary",
                                className: "mt-3",
                                onClick: fetchLatest,
                                children: "Try again"
                            }, void 0, false, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 166,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 164,
                        columnNumber: 11
                    }, this),
                    empty && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "rounded-xl border border-dashed p-4 text-sm text-muted-foreground",
                        children: waitingForGps ? "Waiting for GPS fix..." : "We'll start suggesting zones once we see your location."
                    }, void 0, false, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 173,
                        columnNumber: 11
                    }, this),
                    !loading && !error && recommendation?.top?.length ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "space-y-3",
                        children: recommendation.top.map((zone)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(ZoneCard, {
                                zone: zone
                            }, zone.zone_id, false, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 183,
                                columnNumber: 15
                            }, this))
                    }, void 0, false, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 181,
                        columnNumber: 11
                    }, this) : null
                ]
            }, void 0, true, {
                fileName: "[project]/components/NextZonesPanel.tsx",
                lineNumber: 151,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/NextZonesPanel.tsx",
        lineNumber: 141,
        columnNumber: 5
    }, this);
}
_s(NextZonesPanel, "urR7KOP84ere+BA7iafLCkxdBt4=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useDriverState$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDriverState"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"]
    ];
});
_c = NextZonesPanel;
function ZoneCard({ zone }) {
    const hasScore = typeof zone.score === "number";
    const hasEta = typeof zone.eta_min === "number";
    const hasDistance = typeof zone.distance_km === "number";
    const distanceLabel = hasDistance ? `${zone.distance_km.toFixed(1)} km` : "Distance n/a";
    const etaLabel = hasEta ? `${zone.eta_min} min` : "ETA n/a";
    const scoreLabel = hasScore ? zone.score.toFixed(2) : "Score n/a";
    const barWidth = hasScore ? `${Math.min(100, Math.round(zone.score * 100))}%` : "0%";
    const handleNavigate = ()=>{
        const q = encodeURIComponent(`${zone.zone_name} Patna`);
        window.open(`https://www.google.com/maps/search/?api=1&query=${q}`, "_blank");
    };
    const trafficLabel = typeof zone.traffic_speed_idx === "number" ? describeTrafficLevel(zone.traffic_speed_idx) : null;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "rounded-2xl border p-4",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex items-start justify-between gap-3",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "flex items-center gap-2 text-base font-semibold",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$map$2d$pin$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__MapPin$3e$__["MapPin"], {
                                        className: "h-4 w-4 text-primary"
                                    }, void 0, false, {
                                        fileName: "[project]/components/NextZonesPanel.tsx",
                                        lineNumber: 216,
                                        columnNumber: 13
                                    }, this),
                                    zone.zone_name
                                ]
                            }, void 0, true, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 215,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                className: "text-xs text-muted-foreground",
                                children: [
                                    distanceLabel,
                                    " | ",
                                    etaLabel,
                                    " | ",
                                    scoreLabel
                                ]
                            }, void 0, true, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 219,
                                columnNumber: 11
                            }, this),
                            trafficLabel && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                className: "text-xs text-muted-foreground",
                                children: [
                                    "Traffic: ",
                                    trafficLabel
                                ]
                            }, void 0, true, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 223,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 214,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        size: "sm",
                        variant: "secondary",
                        onClick: handleNavigate,
                        children: [
                            "Navigate",
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$arrow$2d$up$2d$right$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ArrowUpRight$3e$__["ArrowUpRight"], {
                                className: "ml-1 h-3 w-3"
                            }, void 0, false, {
                                fileName: "[project]/components/NextZonesPanel.tsx",
                                lineNumber: 228,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/NextZonesPanel.tsx",
                        lineNumber: 226,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/components/NextZonesPanel.tsx",
                lineNumber: 213,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "mt-3 text-sm text-muted-foreground",
                children: zone.reason
            }, void 0, false, {
                fileName: "[project]/components/NextZonesPanel.tsx",
                lineNumber: 231,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "mt-3 h-1.5 rounded-full bg-muted",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "h-full rounded-full bg-emerald-500",
                    style: {
                        width: barWidth
                    }
                }, void 0, false, {
                    fileName: "[project]/components/NextZonesPanel.tsx",
                    lineNumber: 233,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/components/NextZonesPanel.tsx",
                lineNumber: 232,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/NextZonesPanel.tsx",
        lineNumber: 212,
        columnNumber: 5
    }, this);
}
_c1 = ZoneCard;
function describeTrafficSource(source) {
    if (source === "google") return "Google live traffic";
    if (source === "cache") return "Cached traffic snapshot";
    if (source === "fallback") return "Estimated traffic";
    return null;
}
function describeTrafficLevel(idx) {
    if (idx >= 0.85) return "Smooth";
    if (idx >= 0.65) return "Moderate";
    if (idx >= 0.4) return "Busy";
    return "Heavy";
}
var _c, _c1;
__turbopack_context__.k.register(_c, "NextZonesPanel");
__turbopack_context__.k.register(_c1, "ZoneCard");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/TrafficPreviewMap.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "TrafficPreviewMap",
    ()=>TrafficPreviewMap
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$polyfills$2f$process$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = /*#__PURE__*/ __turbopack_context__.i("[project]/node_modules/next/dist/build/polyfills/process.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$script$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/script.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/card.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/button.tsx [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
const DEFAULT_CENTER = {
    lat: 25.617,
    lon: 85.141
};
const MAPS_BROWSER_KEY = ("TURBOPACK compile-time value", "AIzaSyBmrEg7SfI6pHlfcoAhOBG5GbHXxFz9pqk");
const MAX_ACCURACY_METERS = 200;
function TrafficPreviewMap({ currentLocation, recommendedZones }) {
    _s();
    const mapRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const [scriptLoaded, setScriptLoaded] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [map, setMap] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [userLocation, setUserLocation] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [locationError, setLocationError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isRequestingLocation, setIsRequestingLocation] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const markersRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])([]);
    const locationWatchRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const zones = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "TrafficPreviewMap.useMemo[zones]": ()=>(recommendedZones ?? []).filter({
                "TrafficPreviewMap.useMemo[zones]": (zone)=>typeof zone.lat === "number" && typeof zone.lon === "number"
            }["TrafficPreviewMap.useMemo[zones]"])
    }["TrafficPreviewMap.useMemo[zones]"], [
        recommendedZones
    ]);
    const requestLocation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "TrafficPreviewMap.useCallback[requestLocation]": ()=>{
            if (("TURBOPACK compile-time value", "object") === "undefined" || !navigator.geolocation) {
                setLocationError("Geolocation is not supported by your browser");
                return;
            }
            setIsRequestingLocation(true);
            if (locationWatchRef.current !== null) {
                navigator.geolocation.clearWatch(locationWatchRef.current);
            }
            locationWatchRef.current = navigator.geolocation.watchPosition({
                "TrafficPreviewMap.useCallback[requestLocation]": (position)=>{
                    const accuracy = typeof position.coords.accuracy === "number" ? position.coords.accuracy : null;
                    if (!Number.isFinite(accuracy) || accuracy === null || accuracy > MAX_ACCURACY_METERS) {
                        setLocationError("Waiting for a precise GPS fix (move outdoors if possible).");
                        setIsRequestingLocation(false);
                        return;
                    }
                    setUserLocation({
                        lat: position.coords.latitude,
                        lon: position.coords.longitude,
                        accuracy
                    });
                    setLocationError(null);
                    setIsRequestingLocation(false);
                }
            }["TrafficPreviewMap.useCallback[requestLocation]"], {
                "TrafficPreviewMap.useCallback[requestLocation]": (error)=>{
                    setIsRequestingLocation(false);
                    setLocationError(describeGeoError(error));
                }
            }["TrafficPreviewMap.useCallback[requestLocation]"], {
                enableHighAccuracy: true,
                maximumAge: 0,
                timeout: 15_000
            });
        }
    }["TrafficPreviewMap.useCallback[requestLocation]"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "TrafficPreviewMap.useEffect": ()=>{
            requestLocation();
            return ({
                "TrafficPreviewMap.useEffect": ()=>{
                    if (locationWatchRef.current !== null && navigator.geolocation) {
                        navigator.geolocation.clearWatch(locationWatchRef.current);
                    }
                }
            })["TrafficPreviewMap.useEffect"];
        }
    }["TrafficPreviewMap.useEffect"], [
        requestLocation
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "TrafficPreviewMap.useEffect": ()=>{
            if (!MAPS_BROWSER_KEY || !scriptLoaded || map || !mapRef.current) return;
            const google = window.google;
            if (!google?.maps) return;
            const effectiveLocation = currentLocation || userLocation;
            const initialCenter = effectiveLocation ? {
                lat: effectiveLocation.lat,
                lng: effectiveLocation.lon
            } : {
                lat: DEFAULT_CENTER.lat,
                lng: DEFAULT_CENTER.lon
            };
            const instance = new google.maps.Map(mapRef.current, {
                center: initialCenter,
                zoom: 13,
                disableDefaultUI: true
            });
            const trafficLayer = new google.maps.TrafficLayer();
            trafficLayer.setMap(instance);
            setMap(instance);
            return ({
                "TrafficPreviewMap.useEffect": ()=>{
                    trafficLayer.setMap(null);
                }
            })["TrafficPreviewMap.useEffect"];
        }
    }["TrafficPreviewMap.useEffect"], [
        scriptLoaded,
        map,
        currentLocation,
        userLocation
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "TrafficPreviewMap.useEffect": ()=>{
            if (!map) return;
            const google = window.google;
            if (!google?.maps) return;
            markersRef.current.forEach({
                "TrafficPreviewMap.useEffect": (marker)=>marker.setMap(null)
            }["TrafficPreviewMap.useEffect"]);
            markersRef.current = [];
            const bounds = new google.maps.LatLngBounds();
            let hasBounds = false;
            const effectiveLocation = currentLocation || userLocation;
            if (effectiveLocation) {
                const marker = new google.maps.Marker({
                    map,
                    position: {
                        lat: effectiveLocation.lat,
                        lng: effectiveLocation.lon
                    },
                    title: "You",
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 7,
                        fillColor: "#10b981",
                        fillOpacity: 1,
                        strokeColor: "#ffffff",
                        strokeWeight: 2
                    }
                });
                markersRef.current.push(marker);
                bounds.extend(marker.getPosition());
                hasBounds = true;
                map.panTo(marker.getPosition());
            }
            zones.forEach({
                "TrafficPreviewMap.useEffect": (zone, idx)=>{
                    const marker = new google.maps.Marker({
                        map,
                        position: {
                            lat: zone.lat,
                            lng: zone.lon
                        },
                        label: `${idx + 1}`,
                        title: zone.zone_name
                    });
                    markersRef.current.push(marker);
                    bounds.extend(marker.getPosition());
                    hasBounds = true;
                }
            }["TrafficPreviewMap.useEffect"]);
            if (hasBounds) {
                map.fitBounds(bounds, 48);
            }
        }
    }["TrafficPreviewMap.useEffect"], [
        map,
        zones,
        currentLocation,
        userLocation
    ]);
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Card"], {
        className: "shadow-sm",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardHeader"], {
                className: "space-y-1",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardTitle"], {
                        className: "text-base font-semibold",
                        children: "Live map preview"
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 179,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-xs text-muted-foreground",
                        children: "Browser geolocation + Google Maps traffic overlay (visual only)"
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 180,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/components/TrafficPreviewMap.tsx",
                lineNumber: 178,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$card$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CardContent"], {
                className: "space-y-3",
                children: [
                    locationError && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "rounded-lg bg-amber-50 px-3 py-2 text-xs text-amber-800",
                        children: locationError
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 186,
                        columnNumber: 11
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex justify-end",
                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                            variant: "outline",
                            size: "sm",
                            onClick: requestLocation,
                            disabled: isRequestingLocation,
                            children: isRequestingLocation ? "Requesting location..." : "Use my current location"
                        }, void 0, false, {
                            fileName: "[project]/components/TrafficPreviewMap.tsx",
                            lineNumber: 191,
                            columnNumber: 11
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 190,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "h-64 w-full overflow-hidden rounded-2xl border",
                        ref: mapRef
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 200,
                        columnNumber: 9
                    }, this),
                    zones.length > 0 ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "text-xs text-muted-foreground",
                        children: zones.slice(0, 3).map((zone, idx)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                children: [
                                    "#",
                                    idx + 1,
                                    " ",
                                    zone.zone_name,
                                    ": ",
                                    zone.eta_min.toFixed(1),
                                    " min,",
                                    " ",
                                    zone.distance_km.toFixed(1),
                                    " km"
                                ]
                            }, zone.zone_id, true, {
                                fileName: "[project]/components/TrafficPreviewMap.tsx",
                                lineNumber: 204,
                                columnNumber: 15
                            }, this))
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 202,
                        columnNumber: 11
                    }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                        className: "text-xs text-muted-foreground",
                        children: "Start tracking to see nearby recommended zones on the map."
                    }, void 0, false, {
                        fileName: "[project]/components/TrafficPreviewMap.tsx",
                        lineNumber: 211,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/components/TrafficPreviewMap.tsx",
                lineNumber: 184,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$script$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                id: "google-maps-js",
                src: `https://maps.googleapis.com/maps/api/js?key=${MAPS_BROWSER_KEY}&libraries=visualization`,
                strategy: "lazyOnload",
                onLoad: ()=>setScriptLoaded(true)
            }, void 0, false, {
                fileName: "[project]/components/TrafficPreviewMap.tsx",
                lineNumber: 216,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/TrafficPreviewMap.tsx",
        lineNumber: 177,
        columnNumber: 5
    }, this);
}
_s(TrafficPreviewMap, "RuE+K90ZDM/HCfqx/JUADp8Xfj4=");
_c = TrafficPreviewMap;
function describeGeoError(error) {
    switch(error.code){
        case error.PERMISSION_DENIED:
            return "Location permission denied. Please enable location access in your browser settings.";
        case error.POSITION_UNAVAILABLE:
            return "GPS signal unavailable. Move outdoors for a clearer sky view.";
        case error.TIMEOUT:
            return "Timed out while fetching your location. Try again from an open area.";
        default:
            return "Unable to retrieve your location";
    }
}
var _c;
__turbopack_context__.k.register(_c, "TrafficPreviewMap");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/RideControls.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "RideControls",
    ()=>RideControls
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/api-client.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/tracking/store.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
const events = [
    {
        type: "booking_received",
        label: "Got a Ride",
        variant: "default"
    },
    {
        type: "ride_started",
        label: "Ride Started",
        variant: "secondary"
    },
    {
        type: "ride_completed",
        label: "Ride Completed",
        variant: "outline"
    },
    {
        type: "booking_cancelled",
        label: "Booking Cancelled",
        variant: "ghost"
    }
];
function RideControls({ lastFix }) {
    _s();
    const [platform, setPlatform] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("ola");
    const [activeEvent, setActiveEvent] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [submitting, setSubmitting] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const setIsDriving = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "RideControls.useTrackingStore[setIsDriving]": (s)=>s.setIsDriving
    }["RideControls.useTrackingStore[setIsDriving]"]);
    const coordsCopy = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useMemo"])({
        "RideControls.useMemo[coordsCopy]": ()=>{
            if (!lastFix) return "No live GPS";
            return `${lastFix.lat.toFixed(4)}, ${lastFix.lon.toFixed(4)}`;
        }
    }["RideControls.useMemo[coordsCopy]"], [
        lastFix
    ]);
    const confirmEvent = async ()=>{
        if (!activeEvent) return;
        setSubmitting(true);
        const payload = {
            event_type: activeEvent.type,
            platform
        };
        if (lastFix) {
            if (activeEvent.type === "ride_completed") {
                payload.drop_lat = lastFix.lat;
                payload.drop_lon = lastFix.lon;
            } else {
                payload.pickup_lat = lastFix.lat;
                payload.pickup_lon = lastFix.lon;
            }
        }
        const { error } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["postRideEvent"])(payload);
        setSubmitting(false);
        setActiveEvent(null);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error(error.message);
        } else {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success(`${copyForEvent(activeEvent.type)} logged`);
            updateDrivingState(activeEvent.type, setIsDriving);
        }
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "space-y-4",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "flex items-center justify-between rounded-2xl border bg-white/60 px-4 py-3 shadow-sm",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                className: "text-xs uppercase text-muted-foreground",
                                children: "Current platform"
                            }, void 0, false, {
                                fileName: "[project]/components/RideControls.tsx",
                                lineNumber: 70,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "mt-1 inline-flex gap-2 rounded-full bg-muted p-1",
                                children: [
                                    "ola",
                                    "uber"
                                ].map((provider)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                        type: "button",
                                        onClick: ()=>setPlatform(provider),
                                        className: `rounded-full px-3 py-1 text-xs font-semibold capitalize transition ${platform === provider ? "bg-white text-foreground shadow" : "text-muted-foreground"}`,
                                        children: provider
                                    }, provider, false, {
                                        fileName: "[project]/components/RideControls.tsx",
                                        lineNumber: 73,
                                        columnNumber: 15
                                    }, this))
                            }, void 0, false, {
                                fileName: "[project]/components/RideControls.tsx",
                                lineNumber: 71,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/RideControls.tsx",
                        lineNumber: 69,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "text-right text-xs text-muted-foreground",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                children: "Last fix"
                            }, void 0, false, {
                                fileName: "[project]/components/RideControls.tsx",
                                lineNumber: 89,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                className: "font-semibold text-foreground",
                                children: coordsCopy
                            }, void 0, false, {
                                fileName: "[project]/components/RideControls.tsx",
                                lineNumber: 90,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/components/RideControls.tsx",
                        lineNumber: 88,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/components/RideControls.tsx",
                lineNumber: 68,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "grid grid-cols-2 gap-3",
                children: events.map((event)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                        className: event.type === "booking_received" ? "col-span-2 h-14 text-base" : "h-12",
                        variant: event.variant,
                        onClick: ()=>setActiveEvent(event),
                        children: event.label
                    }, event.type, false, {
                        fileName: "[project]/components/RideControls.tsx",
                        lineNumber: 96,
                        columnNumber: 11
                    }, this))
            }, void 0, false, {
                fileName: "[project]/components/RideControls.tsx",
                lineNumber: 94,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                className: "text-xs text-muted-foreground",
                children: "Your live location is only used to suggest better zones and calculate your performance. It stays private to you."
            }, void 0, false, {
                fileName: "[project]/components/RideControls.tsx",
                lineNumber: 107,
                columnNumber: 7
            }, this),
            activeEvent && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4 pb-8",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "w-full max-w-md rounded-3xl bg-bg p-5 shadow-2xl",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                            className: "text-sm font-semibold text-muted-foreground",
                            children: "Confirm action"
                        }, void 0, false, {
                            fileName: "[project]/components/RideControls.tsx",
                            lineNumber: 114,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                            className: "text-2xl font-semibold",
                            children: activeEvent.label
                        }, void 0, false, {
                            fileName: "[project]/components/RideControls.tsx",
                            lineNumber: 115,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                            className: "mt-2 text-sm text-muted-foreground",
                            children: [
                                "Platform: ",
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                    className: "font-medium capitalize",
                                    children: platform
                                }, void 0, false, {
                                    fileName: "[project]/components/RideControls.tsx",
                                    lineNumber: 117,
                                    columnNumber: 25
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/components/RideControls.tsx",
                            lineNumber: 116,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                            className: "text-sm text-muted-foreground",
                            children: [
                                "Location: ",
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                    className: "font-medium",
                                    children: coordsCopy
                                }, void 0, false, {
                                    fileName: "[project]/components/RideControls.tsx",
                                    lineNumber: 120,
                                    columnNumber: 25
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/components/RideControls.tsx",
                            lineNumber: 119,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "mt-5 flex gap-3",
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                    variant: "outline",
                                    className: "flex-1",
                                    onClick: ()=>setActiveEvent(null),
                                    children: "Cancel"
                                }, void 0, false, {
                                    fileName: "[project]/components/RideControls.tsx",
                                    lineNumber: 123,
                                    columnNumber: 15
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                    className: "flex-1",
                                    onClick: confirmEvent,
                                    disabled: submitting,
                                    children: submitting ? "Saving." : "Confirm"
                                }, void 0, false, {
                                    fileName: "[project]/components/RideControls.tsx",
                                    lineNumber: 126,
                                    columnNumber: 15
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/components/RideControls.tsx",
                            lineNumber: 122,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/components/RideControls.tsx",
                    lineNumber: 113,
                    columnNumber: 11
                }, this)
            }, void 0, false, {
                fileName: "[project]/components/RideControls.tsx",
                lineNumber: 112,
                columnNumber: 9
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/components/RideControls.tsx",
        lineNumber: 67,
        columnNumber: 5
    }, this);
}
_s(RideControls, "NVYP90et8/LMicHXIpKgSa7eQoc=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"]
    ];
});
_c = RideControls;
function updateDrivingState(action, setIsDriving) {
    switch(action){
        case "ride_started":
            setIsDriving(true);
            return;
        case "ride_completed":
        case "booking_cancelled":
        case "booking_received":
            setIsDriving(false);
            return;
        default:
            return;
    }
}
function copyForEvent(type) {
    switch(type){
        case "booking_received":
            return "Booking";
        case "ride_started":
            return "Ride start";
        case "ride_completed":
            return "Ride completion";
        case "booking_cancelled":
            return "Cancellation";
        default:
            return "Event";
    }
}
var _c;
__turbopack_context__.k.register(_c, "RideControls");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/components/GpsAccuracyBadge.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GpsAccuracyBadge",
    ()=>GpsAccuracyBadge
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/utils.ts [app-client] (ecmascript)");
"use client";
;
;
function GpsAccuracyBadge({ accuracy, trackingOn }) {
    let label = trackingOn ? "GPS: waiting for fix" : "GPS: paused";
    let tone = "bg-muted text-muted-foreground";
    if (typeof accuracy === "number" && Number.isFinite(accuracy)) {
        const rounded = Math.max(0, Math.round(accuracy));
        if (rounded <= 30) {
            label = `GPS: ${rounded}m accuracy`;
            tone = "bg-emerald-100 text-emerald-900";
        } else if (rounded <= 100) {
            label = `GPS: ${rounded}m (ok)`;
            tone = "bg-amber-100 text-amber-900";
        } else {
            label = `GPS: ${rounded}m (weak) - move outdoors`;
            tone = "bg-rose-100 text-rose-900";
        }
    } else if (trackingOn) {
        tone = "bg-muted text-muted-foreground";
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$utils$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cn"])("inline-flex rounded-full px-3 py-1 text-xs font-semibold", tone),
        children: label
    }, void 0, false, {
        fileName: "[project]/components/GpsAccuracyBadge.tsx",
        lineNumber: 31,
        columnNumber: 5
    }, this);
}
_c = GpsAccuracyBadge;
var _c;
__turbopack_context__.k.register(_c, "GpsAccuracyBadge");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/lib/offline-queue.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "drain",
    ()=>drain,
    "enqueue",
    ()=>enqueue
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$idb$2f$build$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/idb/build/index.js [app-client] (ecmascript)");
;
const DB = "ride-db";
const STORE = "events";
async function db() {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$idb$2f$build$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["openDB"])(DB, 1, {
        upgrade (d) {
            d.createObjectStore(STORE, {
                keyPath: "id",
                autoIncrement: true
            });
        }
    });
}
async function enqueue(e) {
    (await db()).add(STORE, {
        ...e,
        created_at: Date.now()
    });
}
async function drain(flush) {
    const d = await db();
    const tx = d.transaction(STORE, "readwrite");
    const s = tx.store;
    let c = await s.openCursor();
    while(c){
        const ok = await flush(c.value);
        if (ok) await c.delete();
        c = await c.continue();
    }
    await tx.done;
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/hooks/useLiveTracking.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useLiveTracking",
    ()=>useLiveTracking
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/api-client.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/tracking/store.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$offline$2d$queue$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/offline-queue.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
const MIN_DISTANCE_DELTA = 30; // meters
const MIN_INTERVAL_MS = 5000;
const MAX_ACCURACY_METERS = 200;
const ACCURACY_IMPROVEMENT_FACTOR = 0.5;
function useLiveTracking() {
    _s();
    const trackingOn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[trackingOn]": (s)=>s.trackingOn
    }["useLiveTracking.useTrackingStore[trackingOn]"]);
    const permissionStatus = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[permissionStatus]": (s)=>s.permissionStatus
    }["useLiveTracking.useTrackingStore[permissionStatus]"]);
    const lastFix = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[lastFix]": (s)=>s.lastFix
    }["useLiveTracking.useTrackingStore[lastFix]"]);
    const lastPingAt = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[lastPingAt]": (s)=>s.lastPingAt
    }["useLiveTracking.useTrackingStore[lastPingAt]"]);
    const lastRecommendation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[lastRecommendation]": (s)=>s.lastRecommendation
    }["useLiveTracking.useTrackingStore[lastRecommendation]"]);
    const error = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[error]": (s)=>s.error
    }["useLiveTracking.useTrackingStore[error]"]);
    const autoStartPending = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[autoStartPending]": (s)=>s.autoStartPending
    }["useLiveTracking.useTrackingStore[autoStartPending]"]);
    const setTrackingOn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setTrackingOn]": (s)=>s.setTrackingOn
    }["useLiveTracking.useTrackingStore[setTrackingOn]"]);
    const setPermissionStatus = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setPermissionStatus]": (s)=>s.setPermissionStatus
    }["useLiveTracking.useTrackingStore[setPermissionStatus]"]);
    const setLastFix = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setLastFix]": (s)=>s.setLastFix
    }["useLiveTracking.useTrackingStore[setLastFix]"]);
    const setLastPingAt = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setLastPingAt]": (s)=>s.setLastPingAt
    }["useLiveTracking.useTrackingStore[setLastPingAt]"]);
    const setRecommendation = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setRecommendation]": (s)=>s.setRecommendation
    }["useLiveTracking.useTrackingStore[setRecommendation]"]);
    const setError = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setError]": (s)=>s.setError
    }["useLiveTracking.useTrackingStore[setError]"]);
    const setAutoStartPending = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"])({
        "useLiveTracking.useTrackingStore[setAutoStartPending]": (s)=>s.setAutoStartPending
    }["useLiveTracking.useTrackingStore[setAutoStartPending]"]);
    const watchId = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const lastSentTimestamp = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(0);
    const lastBroadcastPosition = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRef"])(null);
    const updatePermissionFromNavigator = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLiveTracking.useCallback[updatePermissionFromNavigator]": async ()=>{
            try {
                if (navigator.permissions?.query) {
                    const result = await navigator.permissions.query({
                        name: "geolocation"
                    });
                    setPermissionStatus(result.state);
                    result.onchange = ({
                        "useLiveTracking.useCallback[updatePermissionFromNavigator]": ()=>setPermissionStatus(result.state)
                    })["useLiveTracking.useCallback[updatePermissionFromNavigator]"];
                } else {
                    setPermissionStatus("unsupported");
                }
            } catch (err) {
                console.warn("permission query failed", err);
                setPermissionStatus("unsupported");
            }
        }
    }["useLiveTracking.useCallback[updatePermissionFromNavigator]"], [
        setPermissionStatus
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useLiveTracking.useEffect": ()=>{
            updatePermissionFromNavigator();
        }
    }["useLiveTracking.useEffect"], [
        updatePermissionFromNavigator
    ]);
    const stopWatch = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLiveTracking.useCallback[stopWatch]": ()=>{
            if (watchId.current !== null && typeof navigator !== "undefined" && navigator.geolocation) {
                navigator.geolocation.clearWatch(watchId.current);
                watchId.current = null;
            }
        }
    }["useLiveTracking.useCallback[stopWatch]"], []);
    const handlePingSuccess = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLiveTracking.useCallback[handlePingSuccess]": (recommendation, timestampIso)=>{
            setLastPingAt(timestampIso);
            if (recommendation) {
                setRecommendation(recommendation);
            }
            setError(null);
        }
    }["useLiveTracking.useCallback[handlePingSuccess]"], [
        setLastPingAt,
        setRecommendation,
        setError
    ]);
    const sendPing = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLiveTracking.useCallback[sendPing]": async (position)=>{
            const accuracy = typeof position.coords.accuracy === "number" ? position.coords.accuracy : null;
            if (!Number.isFinite(accuracy) || accuracy === null || accuracy > MAX_ACCURACY_METERS) {
                setError("GPS accuracy is weak (>200m). Move outdoors for a clear fix.");
                return;
            }
            const speedKmh = typeof position.coords.speed === "number" && Number.isFinite(position.coords.speed) ? position.coords.speed * 3.6 : null;
            setLastFix({
                lat: position.coords.latitude,
                lon: position.coords.longitude,
                accuracy,
                speed: speedKmh,
                timestamp: position.timestamp
            });
            setError(null);
            const now = Date.now();
            const last = lastBroadcastPosition.current;
            let accuracyImproved = false;
            if (last && typeof last.coords.accuracy === "number" && Number.isFinite(last.coords.accuracy)) {
                accuracyImproved = accuracy <= last.coords.accuracy * ACCURACY_IMPROVEMENT_FACTOR;
            }
            if (last && distanceMeters(last.coords, position.coords) < MIN_DISTANCE_DELTA && now - lastSentTimestamp.current < MIN_INTERVAL_MS && !accuracyImproved) {
                return;
            }
            lastBroadcastPosition.current = position;
            lastSentTimestamp.current = now;
            const payload = {
                lat: position.coords.latitude,
                lon: position.coords.longitude,
                ts: new Date(position.timestamp).toISOString(),
                accuracy_m: accuracy,
                speed_kmh: speedKmh ?? undefined
            };
            const { data, error } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$api$2d$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["postPing"])(payload);
            if (error) {
                setError(error.message);
                await (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$offline$2d$queue$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["enqueue"])(payload);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Could not sync live location. We'll retry soon.");
                return;
            }
            handlePingSuccess(data?.recommendation ?? null, payload.ts ?? new Date().toISOString());
        }
    }["useLiveTracking.useCallback[sendPing]"], [
        setLastFix,
        handlePingSuccess,
        setError
    ]);
    const requestPermission = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLiveTracking.useCallback[requestPermission]": async ()=>{
            try {
                const { state } = await navigator.permissions.query({
                    name: "geolocation"
                });
                setPermissionStatus(state);
                if (state === "denied") {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Location permission denied. Enable it in browser settings.");
                    return false;
                }
                if (state === "prompt") {
                    await new Promise({
                        "useLiveTracking.useCallback[requestPermission]": (resolve, reject)=>{
                            navigator.geolocation.getCurrentPosition(resolve, reject, {
                                enableHighAccuracy: true,
                                timeout: 15000,
                                maximumAge: 0
                            });
                        }
                    }["useLiveTracking.useCallback[requestPermission]"]);
                    setPermissionStatus("granted");
                }
                return true;
            } catch (error) {
                console.error("permission request failed", error);
                setPermissionStatus("unsupported");
                return false;
            }
        }
    }["useLiveTracking.useCallback[requestPermission]"], [
        setPermissionStatus
    ]);
    const toggleTracking = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useLiveTracking.useCallback[toggleTracking]": async ()=>{
            if (trackingOn) {
                stopWatch();
                setTrackingOn(false);
                return;
            }
            const granted = await requestPermission();
            if (!granted) {
                setError("Location permission required for live tracking");
                return;
            }
            setTrackingOn(true);
        }
    }["useLiveTracking.useCallback[toggleTracking]"], [
        trackingOn,
        requestPermission,
        stopWatch,
        setTrackingOn,
        setError
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useLiveTracking.useEffect": ()=>{
            if (!trackingOn && autoStartPending) {
                void toggleTracking();
                setAutoStartPending(false);
            }
        }
    }["useLiveTracking.useEffect"], [
        trackingOn,
        autoStartPending,
        toggleTracking,
        setAutoStartPending
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useLiveTracking.useEffect": ()=>{
            if (!trackingOn) {
                stopWatch();
                return;
            }
            if (typeof navigator === "undefined" || !navigator.geolocation) {
                setError("Geolocation is not supported in this browser.");
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Geolocation is not available on this device.");
                setTrackingOn(false);
                return;
            }
            watchId.current = navigator.geolocation.watchPosition({
                "useLiveTracking.useEffect": (pos)=>sendPing(pos)
            }["useLiveTracking.useEffect"], {
                "useLiveTracking.useEffect": (err)=>{
                    console.error("watchPosition error", err);
                    const friendly = describeGeoError(err);
                    setError(friendly);
                    if (err.code === err.PERMISSION_DENIED) {
                        setTrackingOn(false);
                        setPermissionStatus("denied");
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Permission denied. Please re-enable location access.");
                    } else {
                        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error(friendly);
                    }
                }
            }["useLiveTracking.useEffect"], {
                enableHighAccuracy: true,
                maximumAge: 0,
                timeout: 15000
            });
            return ({
                "useLiveTracking.useEffect": ()=>stopWatch()
            })["useLiveTracking.useEffect"];
        }
    }["useLiveTracking.useEffect"], [
        trackingOn,
        sendPing,
        stopWatch,
        setError,
        setTrackingOn,
        setPermissionStatus
    ]);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useLiveTracking.useEffect": ()=>{
            function handleOnline() {
                setError(null);
            }
            window.addEventListener("online", handleOnline);
            return ({
                "useLiveTracking.useEffect": ()=>window.removeEventListener("online", handleOnline)
            })["useLiveTracking.useEffect"];
        }
    }["useLiveTracking.useEffect"], [
        setError
    ]);
    return {
        trackingOn,
        permissionStatus,
        lastFix,
        lastPingAt,
        lastRecommendation,
        error,
        toggleTracking
    };
}
_s(useLiveTracking, "yRaielTjDID+W/ckrQk0wlnEsno=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$tracking$2f$store$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTrackingStore"]
    ];
});
function distanceMeters(a, b) {
    const R = 6371e3;
    const lat1 = a.latitude * Math.PI / 180;
    const lat2 = b.latitude * Math.PI / 180;
    const deltaLat = lat2 - lat1;
    const deltaLon = (b.longitude - a.longitude) * Math.PI / 180;
    const x = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(deltaLon / 2) * Math.sin(deltaLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(x), Math.sqrt(1 - x));
    return R * c;
}
function describeGeoError(err) {
    switch(err.code){
        case err.PERMISSION_DENIED:
            return "Location permission denied. Enable it in your browser settings.";
        case err.POSITION_UNAVAILABLE:
            return "GPS signal unavailable. Move outdoors for a clear view of the sky.";
        case err.TIMEOUT:
            return "Timed out while waiting for GPS. Try again from an open area.";
        default:
            return err.message || "Unable to determine your location.";
    }
}
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/lib/hooks/useDriverProfile.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useDriverProfile",
    ()=>useDriverProfile
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/supabase/client.ts [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
"use client";
;
;
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["createBrowserSupabaseClient"])();
function useDriverProfile() {
    _s();
    const [profile, setProfile] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useDriverProfile.useEffect": ()=>{
            let active = true;
            async function load() {
                const { data: { user } } = await supabase.auth.getUser();
                if (!user) return;
                const { data } = await supabase.from("profiles").select("id,full_name").eq("id", user.id).maybeSingle();
                if (!active) return;
                setProfile({
                    id: user.id,
                    full_name: data?.full_name ?? user.user_metadata?.full_name ?? null
                });
            }
            load();
            return ({
                "useDriverProfile.useEffect": ()=>{
                    active = false;
                }
            })["useDriverProfile.useEffect"];
        }
    }["useDriverProfile.useEffect"], []);
    return profile;
}
_s(useDriverProfile, "ANwzos52wNXGupoJVH1cRI1qCto=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/app/(driver)/DriverHomeClient.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>DriverHomeClient
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$layout$2f$DriverShell$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/layout/DriverShell.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$TrackingToggle$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/TrackingToggle.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$NextZonesPanel$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/NextZonesPanel.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$TrafficPreviewMap$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/TrafficPreviewMap.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$RideControls$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/RideControls.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$components$2f$GpsAccuracyBadge$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/components/GpsAccuracyBadge.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$useLiveTracking$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/hooks/useLiveTracking.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useDriverProfile$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/hooks/useDriverProfile.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useTodayStats$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/lib/hooks/useTodayStats.ts [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
;
;
function DriverHomeClient() {
    _s();
    const tracking = (0, __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$useLiveTracking$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLiveTracking"])();
    const profile = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useDriverProfile$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDriverProfile"])();
    const { stats } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useTodayStats$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTodayStats"])();
    const greeting = profile?.full_name ? `Hi, ${profile.full_name.split(" ")[0]}` : "Hi driver";
    const subtitle = `Today | ${stats.totalTrips} trips | ?${stats.totalEarnings.toFixed(0)}`;
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$layout$2f$DriverShell$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DriverShell"], {
        title: greeting,
        subtitle: subtitle,
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "space-y-6",
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$TrackingToggle$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TrackingToggle"], {
                            trackingOn: tracking.trackingOn,
                            permissionStatus: tracking.permissionStatus,
                            toggleTracking: tracking.toggleTracking,
                            error: tracking.error
                        }, void 0, false, {
                            fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                            lineNumber: 26,
                            columnNumber: 11
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "flex flex-col items-start gap-2 sm:items-end",
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$GpsAccuracyBadge$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["GpsAccuracyBadge"], {
                                trackingOn: tracking.trackingOn,
                                accuracy: tracking.lastFix?.accuracy ?? null
                            }, void 0, false, {
                                fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                                lineNumber: 38,
                                columnNumber: 13
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                            lineNumber: 32,
                            columnNumber: 11
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                    lineNumber: 25,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$NextZonesPanel$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NextZonesPanel"], {
                    trackingOn: tracking.trackingOn,
                    seedRecommendation: tracking.lastRecommendation
                }, void 0, false, {
                    fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                    lineNumber: 45,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$TrafficPreviewMap$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["TrafficPreviewMap"], {
                    currentLocation: tracking.lastFix,
                    recommendedZones: tracking.lastRecommendation?.top ?? null
                }, void 0, false, {
                    fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                    lineNumber: 47,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("section", {
                    className: "space-y-3",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                            className: "text-lg font-semibold",
                            children: "Ride actions"
                        }, void 0, false, {
                            fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                            lineNumber: 53,
                            columnNumber: 11
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$components$2f$RideControls$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["RideControls"], {
                            lastFix: tracking.lastFix
                        }, void 0, false, {
                            fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                            lineNumber: 54,
                            columnNumber: 11
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
                    lineNumber: 52,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
            lineNumber: 24,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/app/(driver)/DriverHomeClient.tsx",
        lineNumber: 23,
        columnNumber: 5
    }, this);
}
_s(DriverHomeClient, "Xf9TLZANP9hroCevuPS/vJHPrPM=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$hooks$2f$useLiveTracking$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useLiveTracking"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useDriverProfile$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useDriverProfile"],
        __TURBOPACK__imported__module__$5b$project$5d2f$lib$2f$hooks$2f$useTodayStats$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useTodayStats"]
    ];
});
_c = DriverHomeClient;
var _c;
__turbopack_context__.k.register(_c, "DriverHomeClient");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=_906330b1._.js.map