{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/supabase/config.ts"],"sourcesContent":["const isServer = () => typeof window === \"undefined\";\n\n/**\n * Next.js only inlines environment variables when they are referenced with static keys.\n * Avoid dynamic lookups (e.g. process.env[key]) because they are stripped from the client bundle\n * and will always be undefined in the browser.\n */\nexport function getSupabaseConfig() {\n  const serverUrl = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const serverAnonKey =\n    process.env.SUPABASE_ANON_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  const url = isServer() ? serverUrl : process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const anonKey = isServer() ? serverAnonKey : process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  if (!url) {\n    throw new Error(\"Missing SUPABASE_URL/NEXT_PUBLIC_SUPABASE_URL environment variable\");\n  }\n  if (!anonKey) {\n    throw new Error(\"Missing SUPABASE_ANON_KEY/NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable\");\n  }\n\n  return { url, anonKey };\n}\n"],"names":[],"mappings":";;;;AAAA,MAAM,WAAW,IAAM,kDAAkB;AAOlC,SAAS;IACd,MAAM,YAAY,QAAQ,GAAG,CAAC,YAAY;IAC1C,MAAM,gBACJ,QAAQ,GAAG,CAAC,iBAAiB;IAE/B,MAAM,MAAM,aAAa,YAAY;IACrC,MAAM,UAAU,aAAa,gBAAgB;IAE7C;;IAGA;;IAIA,OAAO;QAAE;QAAK;IAAQ;AACxB"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\nimport { createServerClient } from \"@supabase/ssr\";\nimport { getSupabaseConfig } from \"@/lib/supabase/config\";\n\nconst PROTECTED_PATHS = [\"/\", \"/daily\", \"/trips\", \"/history\", \"/map\", \"/settings\"];\nconst AUTH_ROUTES = [\"/login\", \"/signup\"];\n\nexport async function middleware(request: NextRequest) {\n  const { url, anonKey } = getSupabaseConfig();\n  const response = NextResponse.next({ request: { headers: request.headers } });\n\n  const supabase = createServerClient(url, anonKey, {\n    cookies: {\n      get(name: string) {\n        return request.cookies.get(name)?.value;\n      },\n      set(name: string, value: string, options: any) {\n        response.cookies.set({ name, value, ...options });\n      },\n      remove(name: string, options: any) {\n        response.cookies.set({ name, value: \"\", ...options, maxAge: 0 });\n      },\n    },\n  });\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser();\n\n  const pathnameRaw = request.nextUrl.pathname;\n  const normalizedPath = pathnameRaw.replace(/\\/+$/, \"\") || \"/\";\n  const isProtected = PROTECTED_PATHS.some(\n    (path) => normalizedPath === path || normalizedPath.startsWith(`${path}/`)\n  );\n  const isAuthRoute = AUTH_ROUTES.includes(normalizedPath);\n\n  if (isProtected && !user) {\n    const loginUrl = new URL(\"/login\", request.url);\n    loginUrl.searchParams.set(\"redirectedFrom\", pathnameRaw);\n    return NextResponse.redirect(loginUrl);\n  }\n\n  if (isAuthRoute && user) {\n    return NextResponse.redirect(new URL(\"/\", request.url));\n  }\n\n  return response;\n}\n\nexport const config = {\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico|manifest.webmanifest|api).*)\"],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAEA;AAAA;AACA;;;;AAEA,MAAM,kBAAkB;IAAC;IAAK;IAAU;IAAU;IAAY;IAAQ;CAAY;AAClF,MAAM,cAAc;IAAC;IAAU;CAAU;AAElC,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,IAAA,sJAAiB;IAC1C,MAAM,WAAW,gMAAY,CAAC,IAAI,CAAC;QAAE,SAAS;YAAE,SAAS,QAAQ,OAAO;QAAC;IAAE;IAE3E,MAAM,WAAW,IAAA,uMAAkB,EAAC,KAAK,SAAS;QAChD,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO;YACpC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAY;gBAC3C,SAAS,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;YACjD;YACA,QAAO,IAAY,EAAE,OAAY;gBAC/B,SAAS,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM,OAAO;oBAAI,GAAG,OAAO;oBAAE,QAAQ;gBAAE;YAChE;QACF;IACF;IAEA,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,MAAM,cAAc,QAAQ,OAAO,CAAC,QAAQ;IAC5C,MAAM,iBAAiB,YAAY,OAAO,CAAC,QAAQ,OAAO;IAC1D,MAAM,cAAc,gBAAgB,IAAI,CACtC,CAAC,OAAS,mBAAmB,QAAQ,eAAe,UAAU,CAAC,GAAG,KAAK,CAAC,CAAC;IAE3E,MAAM,cAAc,YAAY,QAAQ,CAAC;IAEzC,IAAI,eAAe,CAAC,MAAM;QACxB,MAAM,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC9C,SAAS,YAAY,CAAC,GAAG,CAAC,kBAAkB;QAC5C,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,IAAI,eAAe,MAAM;QACvB,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;IACvD;IAEA,OAAO;AACT;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAyE;AACrF"}}]
}